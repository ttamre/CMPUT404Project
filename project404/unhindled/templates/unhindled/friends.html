<!DOCTYPE html>
<html>
<head>
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'unhindled/style.css' %}" />
<title>Unhindled</title>
</head>
</html>
<div class="login-banner">
	<div class="user-info">
			<p class="white-title">Unhindled</p>
			<a class="header-link" href="{% url 'index' %}">Home</a>
			<a class="header-link" href="{% url 'mystream' %}">My Stream</a>
			<a class="header-link" href="{% url 'createPost' %}">Create Post</a>
			<div class="account-management">
				<a class="white-text mr-2" href="{% url 'profile' user.profile.pk %}">Profile</a>
					<a class="white-text mr-2" href="{% url 'logout' %}">Log Out</a>
			</div>
	</div>
</div>
<p class="non-white-title">Manage Friends</p>

<form action="/friend_request" method="POST">
	{% csrf_token %}
	<label for="adressee">Friends Username: </label>
	<input id="adressee" type="text" name="adressee" value="">
	<input type="hidden" name="next" value="{{ request.path }}">
    	<input type="submit" value="OK">
</form>
<ul>
{% if object_list %}
	{% for friendship in object_list %}
		{% if friendship.adresseeId == user.username %}
			{% if friendship.status == "pending" %} 
				<li>
					Follower: {{ friendship.requesterId }}
					<form action="/friend_request_accept" method="POST">
						{% csrf_token %}
						<input type="hidden" name="follower" value="{{ friendship.requesterId }}">
						<input type="hidden" name="next" value="{{ request.path }}">
						<input type="submit" value="Accept Friend Request">
						
					</form>
				</li>
			{% endif %}
			{% if friendship.status == "accepted" %} 
				<li>
					Friend: {{ friendship.requesterId }} 
					<form action="/unfriend" method="POST">
						{% csrf_token %}
						<input type="hidden" name="requester" value="{{ friendship.requesterId }}">
						<input type="hidden" name="adressee" value="{{ friendship.adresseeId }}">
						<input type="hidden" name="next" value="{{ request.path }}">
						<input type="submit" value="Unfriend">
					</form>
				</li>
			{% endif %}
	        {% endif %}
	        {% if friendship.requesterId == user.username %}
	        	{% if friendship.status == "pending" %} 
				<li>
					Following: {{ friendship.adresseeId }} 
					<form action="/unfriend" method="POST">
						{% csrf_token %}
						<input type="hidden" name="requester" value="{{ friendship.requesterId }}">
						<input type="hidden" name="adressee" value="{{ friendship.adresseeId }}">
						<input type="hidden" name="next" value="{{ request.path }}">
						<input type="submit" value="Unfollow">
					</form>
				</li>
			{% endif %}
			{% if friendship.status == "accepted" %} 
				<li>
					Friend: {{ friendship.adresseeId }} 
					<form action="/unfriend" method="POST">
						{% csrf_token %}
						<input type="hidden" name="requester" value="{{ friendship.requesterId }}">
						<input type="hidden" name="adressee" value="{{ friendship.adresseeId }}">
						<input type="hidden" name="next" value="{{ request.path }}">
						<input type="submit" value="Unfriend">
					</form>
				</li>
			{% endif %}
	        {% endif %}
	{% endfor %}
{% else %}
	<p>No Friends to show.</p>
{% endif %}
</ul>
