{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}

{% #header user=user %}
{% /header %}

<main>
  <div>
    {% if user.is_authenticated %}
      <p class="non-white-title">My Stream</p>
      {% if object_list %}
        {% for post in object_list %}
          <!-- change this to ID when author and user are matched -->
          {% if post..author.displayName == user.username %}
            <div class="post">
                <a href="{% url 'viewPost' post.author.id post.id %}">{{ post.title }}</a> <br>
                By: {{ post.author }} <br>
                {{ post.description }}
            </div>
          {% endif %}
        {% endfor %}
        <h3>Sent to me</h3>
        {% for post in object_list %}
          {% if post.send_to.username == user.username and post.visibility == "send" %}
            <div class="post">
                <a href="{% url 'viewPost' post.author.id post.id %}">{{ post.title }}</a> <br>
                By: {{ post.author }} <br>
                {{ post.description }}
            </div>
          {% endif %}
        {% endfor %}
      {% else %}
          <p>No Posts to show.</p>
      {% endif %}
    {% endif %}

    <!-- Github Activity -->
    <h3>Github Activity</h3>
    {{ headers|json_script:"headers" }}

    <script src="../../../project404/unhindled/static/unhindled/admin/js/github.js"></script>

    <table id="github_table" type="application/json">
    <tr>
      <th id="table_repo">Repository</th>
      <th id="table_activity">Activity</th>
      <th id="table_link">Link to repo</th>
  </div>
</main>
{ % endblock %}
