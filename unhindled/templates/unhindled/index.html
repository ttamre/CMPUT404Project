<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <title>Unhindled</title>
    
    {% load static %}
    {% load friend_check %}
    <link rel="stylesheet" type="text/css" href="{% static 'unhindled/style.css' %}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    {% #header user=user %}
    {% /header %}
    <body>
        <main>
            <div>
                {% if user.is_authenticated %}
                    <p class="non-white-title">Home</p>
                    {% if object_list %}
                        {% for post in object_list %}
                            {% if post.visibility == "friends" and post.author.username|friend_check:user.username  or post.visibility == "public" %}
                                <div class="post">
                                    {% if post.is_shared_post %}
                                        <a href="{% url 'viewPost' post.author.username post.pk %}">{{ post.title }}</a> <br>
                                        Shared by: {{ post.sharedBy.username }} <br>
                                    {% else %}
                                        <a href="{% url 'viewPost' post.author.username post.pk %}">{{ post.title }}</a> <br>
                                    {% endif %}
                                    Author: {{ post.author }} <br>
                                    {{ post.description }}
                                </div>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        <p>No Posts to Show.</p>
                    {% endif %}
                {% else %}
                    {% if object_list %}
                            {% for post in object_list %}
                                {% if post.visibility == "public" %}
                                    <div class="post">
                                        {% if post.is_shared_post %}
                                            <a href="{% url 'viewPost' post.author.username post.pk %}">{{ post.title }}</a> <br>
                                            Shared by: {{ post.sharedBy.username }} <br>
                                        {% else %}
                                            <a href="{% url 'viewPost' post.author.username post.pk %}">{{ post.title }}</a> <br>
                                        {% endif %}
                                        By: {{ post.author }} <br>
                                        {{ post.description }}
                                    </div>
                                    <div>
                                        <form method = "POST">
                                            {% csrf_token %}
                                            <button type="submit" ,style="font-size:24px"><i class="fa fa-thumbs-up"></i></button>
                                        </form>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <p>No Posts to show.</p>
                        {% endif %}
                {% endif %}
            </div>
        </main>
    </body>
</html>
