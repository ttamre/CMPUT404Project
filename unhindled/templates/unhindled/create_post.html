{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
{% load crispy_forms_tags %}

{% #header user=user %}
{% /header %}

<main>
    <p class="non-white-title">Create Post</p>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <!-- {{ form|crispy }}
        <button class="mt-5 mb-5">Post</button> -->
        <div class="mt-3">
            <label class="mr-2" for="{{ form.author.id_for_label }}">Title: </label>
        </div>
        {{ form.title }}
        {{ form.title.errors }}
        <div class="mt-3">
            <label class="mt-1 mr-2" for="{{ form.contentType.id_for_label }}">Content Type: </label>
        </div>
        {{ form.contentType }}
        {{ form.contentType.errors }}
        <div class="mt-3">
            <label class="mt-1 mr-2" for="{{ form.visibility.id_for_label }}">Visibility: </label>
        </div>
        {{ form.visibility }}
        {{ form.visibility.errors }}
        <div class="mt-3" id="div_id_send_to">
            <label class="mt-1 mr-2" for="{{ form.send_to.id_for_label }}">Send To: </label>
            <div>
                {{ form.send_to }}
            </div>
        </div>
        {{ form.send_to.errors }}
        <div class="mt-3">
            <label for="{{ form.description.id_for_label }}">Description: </label>
        </div>
        {{ form.description }}
        {{ form.description.errors }}
        <div class="mt-3">
            <label class="mt-1 mr-2" for="{{ form.content.id_for_label }}">Content: </label>
        </div>
        {{ form.content }}
        {{ form.content.errors }}
        <div class="mt-3">
            <label class="mr-1" for="{{ form.image.id_for_label }}">Image: </label>
            {{ form.images }}
            {{ form.errors }}
        </div>
        <div class="mt-3">
            <label class="mr-1" for="{{ form.unlisted.id_for_label }}">Unlisted: </label>
            {{ form.unlisted }}
        </div>
        <div class="flex my-5">
            <input type="submit" value="Post" class="button mr-4">
            <input type="cancel" value="Cancel" class="cancel-button">
        </div>
    </form>
</main>
<script>
    window.onload = function() {
        if (document.getElementById("id_visibility").value != "SEND") {
            document.getElementById("div_id_send_to").hidden = true;
        }
        document.getElementById("id_send_to").value = null;
    };

    document.getElementById("id_visibility").onchange = function(){
        if (this.value == "SEND"){
            document.getElementById("div_id_send_to").hidden = false;
        }
        else{
            document.getElementById("div_id_send_to").hidden = true;
            document.getElementById("id_send_to").value = null;
        }
    }
</script>
{% endblock %}